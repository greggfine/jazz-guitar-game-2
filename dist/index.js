"use strict"; !function () { const e = new (window.AudioContext || window.webkitAudioContext); let t, n, o, a, c = e.createGain(), r = e.createGain(), i = e.createGain(), s = e.createGain(), l = e.createGain(); const u = document.querySelector(".score"), d = document.querySelector(".lives"), m = document.querySelector(".start-game-btn"), y = document.querySelector(".start-game-display"), f = document.querySelector(".question-answer-display"), p = document.querySelector(".score-wrapper"), h = document.querySelector(".lives-wrapper"), g = document.querySelector(".volume-control"), T = document.querySelector(".question-count"), C = document.querySelector(".who-is-this"), x = document.querySelector(".play-game"), S = x.querySelector(".btn-group"), q = document.querySelector(".game-over"), v = document.querySelector(".container"), A = document.createElement("img"); let E, L = 0, k = 1, w = 3; u.textContent = L, T.textContent = `${k}/10`, d.textContent = w, g.addEventListener("click", function () { .0010000000474974513 === l.gain.value ? l.gain.exponentialRampToValueAtTime(1, e.currentTime + .2) : l.gain.exponentialRampToValueAtTime(.001, e.currentTime + .2); const t = this.querySelector("i"); t.classList.toggle("fa-volume-up"), t.classList.toggle("fa-volume-off") }); const b = tracks.map(e => e.name), N = () => (function (...e) { _.shuffle([...e]).forEach(e => S.appendChild(e)) })(function (t) { const o = document.createElement("button"); return o.textContent = `${t.name}`, o.addEventListener("click", () => { D("./audio/sfx/success/gregg-omnisphere5.mp3", n = e.createBufferSource()), n.start(), r.gain.setValueAtTime(1, e.currentTime), n.connect(r), r.connect(l), l.connect(e.destination), M(), A.src = "", C.style.display = "none", p.classList.add("success"), u.textContent = L += 100, P() }, { once: !0 }), o }(E), function () { const t = document.createElement("button"); for (; !t.textContent;) { let e = V(b); e !== E.name && (t.textContent = e) } return t.addEventListener("click", () => { D("./audio/sfx/failure/2_DANCE_FX_DANCE_1_003.mp3", o = e.createBufferSource()), o.start(), i.gain.setValueAtTime(1, e.currentTime), o.connect(i), i.connect(l), l.connect(e.destination), M(), A.src = "", C.style.display = "none", h.classList.add("failure"), 0 == (w -= 1) ? (d.textContent = 0, F(), setTimeout(() => { U() }, 1e3)) : (d.textContent = w, P()) }, { once: !0 }), t }()), B = () => tracks[Math.floor(Math.random() * tracks.length)], V = e => e[Math.floor(Math.random() * b.length)]; function $() { s.gain.setValueAtTime(0, e.currentTime), y.style.display = "none", C.style.display = x.style.display = v.style.display = "block", q.textContent = "", L = 0, w = 3, d.textContent = w, u.textContent = L, k = 1, T.textContent = `${k}/10`, G(), O(), H(), N(), R() } function G() { O(), Array.from(S.children).forEach(e => { "BUTTON" === e.tagName && S.removeChild(e) }) } function M() { Array.from(S.children).forEach(e => { "BUTTON" === e.tagName && (e.style.display = "none") }) } function D(t, n) { fetch(t).then(e => e.arrayBuffer()).then(t => e.decodeAudioData(t, e => { n.buffer = e, n.start() }, e => { console.error(e) })) } function H() { E = B(), t = e.createBufferSource(), D(`./audio/cuts/${E.fileName}`, t), t.loop = !0, t.connect(c), c.gain.setValueAtTime(1, e.currentTime), c.connect(l), l.connect(e.destination) } function O() { p.className = "", h.className = "" } function F() { A.style.display = "block", A.src = `./images/optimized/${E.image}`, A.style.width = "300px", A.style.height = "300px", f.appendChild(A), function () { const e = document.createElement("h3"); e.classList.add("name-display"), e.textContent = E.name, f.appendChild(e) }(), c.gain.setTargetAtTime(0, e.currentTime, .03), t.stop(e.currentTime + .03) } function P() { F(), setTimeout(() => { 10 === k ? U() : (T.textContent = `${k += 1}/10`, C.style.display = "block", A.style.display = "none", R(), H(), G(), N()) }, 2e3) } function R() { Array.from(f.children).forEach(e => { "H3" === e.tagName && f.removeChild(e) }) } function U() { setTimeout(() => { D("./audio/sfx/game_over/Cutting Power.mp3", a = e.createBufferSource()), a.start(), s.gain.setValueAtTime(1, e.currentTime), a.connect(s), s.connect(l), l.connect(e.destination), A.style.display = x.style.display = "none", q.innerHTML = `<h1>Game Over<h1>\n                                        <h2>Final Score: ${L}<h2>`, q.classList.add("game-over-display"), function () { const e = document.createElement("button"); e.innerHTML = '\n                <i class="fa fa-play" aria-hidden="true"></i>\n                <span>Play Again?</span>', e.classList.add("play-again-btn"), q.appendChild(e), e.addEventListener("click", () => $()) }() }, 2e3) } A.style.display = x.style.display = "none", m.addEventListener("click", () => { e.resume().then(() => $()) }) }();