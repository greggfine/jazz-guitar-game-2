"use strict";!function(){const e=new(window.AudioContext||window.webkitAudioContext);let t,n,o,a=e.createGain(),c=e.createGain(),r=e.createGain(),i=e.createGain();const s=document.querySelector(".score"),l=document.querySelector(".lives"),u=document.querySelector(".start-game-btn"),d=document.querySelector(".start-game-display"),m=document.querySelector(".question-answer-display"),y=document.querySelector(".score-wrapper"),f=document.querySelector(".lives-wrapper"),p=document.querySelector(".volume-control"),h=document.querySelector(".question-count"),g=document.querySelector(".who-is-this"),C=document.querySelector(".play-game"),x=C.querySelector(".btn-group"),T=document.querySelector(".game-over"),S=document.querySelector(".container"),q=document.createElement("audio"),v=document.createElement("img");let E,A=0,L=1,k=3;q.src="./audio/sfx/game_over/Cutting Power.mp3",s.textContent=A,h.textContent=`${L}/10`,l.textContent=k,p.addEventListener("click",function(){.0010000000474974513===i.gain.value?i.gain.exponentialRampToValueAtTime(1,e.currentTime+.2):i.gain.exponentialRampToValueAtTime(.001,e.currentTime+.2);const t=this.querySelector("i");t.classList.toggle("fa-volume-up"),t.classList.toggle("fa-volume-off")});const w=tracks.map(e=>e.name),b=()=>(function(...e){_.shuffle([...e]).forEach(e=>x.appendChild(e))})(function(t){const o=document.createElement("button");return o.textContent=`${t.name}`,o.addEventListener("click",()=>{V("./audio/sfx/success/gregg-omnisphere5.mp3",n=e.createBufferSource()),n.start(),c.gain.setValueAtTime(1,e.currentTime),n.connect(c),c.connect(i),i.connect(e.destination),G(),v.src="",g.style.display="none",y.classList.add("success"),s.textContent=A+=100,F()},{once:!0}),o}(E),function(){const t=document.createElement("button");for(;!t.textContent;){let e=$(w);e!==E.name&&(t.textContent=e)}return t.addEventListener("click",()=>{V("./audio/sfx/failure/2_DANCE_FX_DANCE_1_003.mp3",o=e.createBufferSource()),o.start(),r.gain.setValueAtTime(1,e.currentTime),o.connect(r),r.connect(i),i.connect(e.destination),G(),v.src="",g.style.display="none",f.classList.add("failure"),0==(k-=1)?(l.textContent=0,R()):(l.textContent=k,F())},{once:!0}),t}()),N=()=>tracks[Math.floor(Math.random()*tracks.length)],$=e=>e[Math.floor(Math.random()*w.length)];function B(){q.muted=!0,d.style.display="none",g.style.display=C.style.display=S.style.display="block",T.textContent="",A=0,k=3,l.textContent=k,s.textContent=A,L=1,h.textContent=`${L}/10`,M(),H(),D(),b(),P()}function M(){H(),Array.from(x.children).forEach(e=>{"BUTTON"===e.tagName&&x.removeChild(e)})}function G(){Array.from(x.children).forEach(e=>{"BUTTON"===e.tagName&&(e.style.display="none")})}function V(t,n){fetch(t).then(e=>e.arrayBuffer()).then(t=>e.decodeAudioData(t,e=>{n.buffer=e,n.start()},e=>{console.error(e)}))}function D(){E=N(),t=e.createBufferSource(),V(`./audio/cuts/${E.fileName}`,t),t.loop=!0,t.connect(a),a.gain.setValueAtTime(1,e.currentTime),a.connect(i),i.connect(e.destination)}function H(){y.className="",f.className=""}function O(){v.style.display="block",v.src=`./images/optimized/${E.image}`,v.style.width="300px",v.style.height="300px",m.appendChild(v),function(){const e=document.createElement("h3");e.classList.add("name-display"),e.textContent=E.name,m.appendChild(e)}(),a.gain.setTargetAtTime(0,e.currentTime,.03),t.stop(e.currentTime+.03)}function F(){O(),setTimeout(()=>{10===L?(P(),R()):(h.textContent=`${L+=1}/10`,g.style.display="block",v.style.display="none",P(),D(),M(),b())},2e3)}function P(){Array.from(m.children).forEach(e=>{"H3"===e.tagName&&m.removeChild(e)})}function R(){O(),setTimeout(()=>{q.muted=!1,q.play(),v.style.display=C.style.display="none",T.innerHTML=`<h1>Game Over<h1>\n                                        <h2>Final Score: ${A}<h2>`,T.classList.add("game-over-display"),function(){const e=document.createElement("button");e.innerHTML='\n                <i class="fa fa-play" aria-hidden="true"></i>\n                <span>Play Again?</span>',e.classList.add("play-again-btn"),T.appendChild(e),e.addEventListener("click",()=>B())}()},2e3)}v.style.display=C.style.display="none",u.addEventListener("click",()=>{e.resume().then(()=>B())})}();